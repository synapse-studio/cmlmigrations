# Import Catalog in taxonomy.
id: cmlmigrations_node_tovar
label: Node Tovar
migration_group: cml
migration_tags:
  - node
dependencies:
  enforced:
    module:
      - cmlmigrations
migration_dependencies:
  required:
    - cmlmigrations_taxonomy_catalog
    - cmlmigrations_commerce_product_variation
source:
  plugin: cml_tovar
destination:
  plugin: entity:node
process:
  type:
    plugin: default_value
    default_value: tovar
  sticky:
    plugin: default_value
    default_value: 0
  uid:
    plugin: default_value
    default_value: 1
  title: title
  status: status
  changed: changed
  'body/value': body_value
  'body/format': body_format
  field_catalog:
    -
      plugin: skip_on_empty
      method: process
      source: catalog
    -
      plugin: migration_lookup
      migration: cmlmigrations_taxonomy_catalog
      source: catalog
  field_tovar_variation:
    -
      plugin: skip_on_empty
      method: process
      source: variations
    -
      plugin: multival
      source: variations
      target_id: target_id
  field_image/target_id: field_image/fid
